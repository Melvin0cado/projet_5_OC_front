(this.webpackJsonpprojet_5_oc=this.webpackJsonpprojet_5_oc||[]).push([[0],{45:function(e,t,a){e.exports=a.p+"static/media/power-off-solid-dark-blue3.99152337.svg"},46:function(e,t){e.exports="data:image/png;base64,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"},48:function(e,t,a){e.exports=a(81)},60:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);var n=a(26),r=a.n(n),i=a(0),l=a.n(i),c=a(24),o=a.n(c),s=a(11),d="LOGIN",u="LOGOUT",m="UPDATE_MONEY",h=a(21),p=a(8),v=a(2),b=a(3),f=a(5),g=a(4),E=(a(59),a(60),a(17)),y=a(1),k=[{name:"Tableau de bord",path:"/"},{name:"G\xe9rer mes enveloppes",path:"/managing/budgetCard"},{name:"Historique des transactions",path:"/deal/history"}],N=a(7),C=a.n(N),O="http://localhost:3033",j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e?{headers:{Authorization:e}}:{headers:{Authorization:{}}}},A=a(29),M=a.n(A),w=a(19),x=a(43),I=a.n(x),B=a(44),D=a(18),S={money:0},T={authenticated:!1,role:[],username:"",email:"",token:"",amountId:{}},F=Object(w.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(D.a)(Object(D.a)({},e),{},{authenticated:!0,role:t.role,id:t.id,username:t.username,email:t.email,token:t.token,amountId:t.amountId});case u:return Object(D.a)(Object(D.a)({},e),{},{authenticated:!1,role:[],username:"",email:"",token:"",amountId:null})}return e},amount:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(D.a)(Object(D.a)({},e),{},{money:t.money})}return e}}),R=Object(w.a)(B.a,I.a)(w.d)(F),L=function(){localStorage.removeItem("token"),R.dispatch({type:u})},V=a(13),P=Object(V.a)(),q=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];M.a.fire({title:"Erreurs",icon:"error",showCancelButton:!1,text:e,timer:5e3,timerProgressBar:!0}).then((function(){!0===t&&L()}))},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;M.a.fire({title:"Succ\xe8s",icon:"success",showCancelButton:!1,text:e,timer:5e3,timerProgressBar:!0}).then((function(){"refresh"===t?window.location.reload(!1):null!==t&&P.push(t)}))},H=function(e){var t=e.data.code,a=e.data.message;switch(401===t&&"Expired JWT Token"===a&&(a="Votre session \xe0 expir\xe9"),t){case 401:q(a,!0);break;case 404:case 409:q(a)}},Y=function(e){var t=e.size;return l.a.createElement("div",{className:"preloader-wrapper ".concat(t," active")},l.a.createElement("div",{className:"spinner-layer spinner-blue-only"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"}))))},G=a(9),U=a.n(G),J=function(e){var t=e.className,a=e.type,n=e.text,r=e.disabled,i=e.onClick;return l.a.createElement("button",{type:a,className:"btn waves-effect waves-light ".concat(t),disabled:r,onClick:i},n)};J.defaultProps={disabled:null,className:""};var W=J,X=function(){document.querySelectorAll("input").forEach((function(e){e.value=""})),U.a.updateTextFields()},K=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={disabledBtn:!0},n.handleChange=n.handleChange.bind(Object(y.a)(n)),n.inputRequiredVerification=n.inputRequiredVerification.bind(Object(y.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.id,t=G.Modal.init(document.getElementById(e));this.setState({instanceModal:t})}},{key:"inputRequiredVerification",value:function(){var e=this.state.money,t=!Number.isInteger(e)||e<=0;return this.setState({disabledBtn:t}),t}},{key:"handleChange",value:function(e){var t=this,a=e.target.name,n=e.target.value;Number.isInteger(parseFloat(n))&&(n=parseInt(n)),this.setState(Object(E.a)({},a,n),(function(){t.inputRequiredVerification()}))}},{key:"handleSubmit",value:function(){var e=this.props,t=e.id,a=e.token,n=e.userId,r=e.type,i=e.amountMoney,l=e.addToAmountMoney,c=e.removeToAmountMoney,o=this.state,s=o.money,d=o.instanceModal,u={money:s};if("add-amount-money"===t||"remove-amount-money"===t){u.type=r;var h="L'ajout d'argent dans vos \xe9conomies est r\xe9ussi";return 1===r&&(h="La soustraction d'argent dans vos \xe9conomies est r\xe9ussi"),C.a.patch("".concat(O,"/api/amount/by-user/").concat(n),u,j(a)).then((function(e){200===e.status&&(0===r?l(s):1===r&&c(s),d.close(),X(),z(h,null))})).catch((function(e){return H(e.response)}))}var p=this.props,v=p.budgetCard,b=p.amountId,f=p.getCardList,g=v.title;u.type=r,u.budgetCardId=v.id,u.amountId=b,u.userId=n;var E="L'ajout d'argent de l'enveloppe ".concat(g," est r\xe9ussi");return 1===r&&(E="La soustraction d'argent de l'enveloppe ".concat(g," est r\xe9ussi.\n L'argent est retourn\xe9 dans vos \xe9conomies")),C.a.post("".concat(O,"/api/deal/create"),u,j(a)).then((function(e){201===e.status&&(f(),0===r?R.dispatch({type:m,money:i-s}):1===r&&R.dispatch({type:m,money:i+s}),d.close(),X(),z(E,null))})).catch((function(e){return H(e.response)}))}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.type,n=e.mainTitle,r=this.state.disabledBtn,i=1===a?"Soustraction d'argent":"Ajout d'argent";return l.a.createElement("div",{id:t,className:"modal card"},l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"row bold text-dark-blue3 title-size"},n),l.a.createElement("form",{className:"row"},l.a.createElement("div",{className:"input-field col m12  l12"},l.a.createElement("input",{name:"money",type:"number",onChange:this.handleChange,min:0,required:!0}),l.a.createElement("label",{htmlFor:"money"},i)),l.a.createElement(W,{type:"button",text:"Valider",disabled:r,onClick:this.handleSubmit}))))}}]),a}(i.Component),Z=Object(s.b)((function(e){return{amountMoney:e.amount.money}}))(K),Q=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={loading:!0},n.handleDisconnect=n.handleDisconnect.bind(Object(y.a)(n)),n.addToAmountMoney=n.addToAmountMoney.bind(Object(y.a)(n)),n.removeToAmountMoney=n.removeToAmountMoney.bind(Object(y.a)(n)),n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.id,n=t.token,r=document.getElementById("power-off");r.style.width="".concat(r.offsetHeight,"px");var i=document.getElementById("disconnectBtn");i.style.width="".concat(i.offsetHeight,"px"),C.a.get("".concat(O,"/api/amount/by-user/").concat(a),j(n)).then((function(t){R.dispatch({type:m,money:t.data.amount.money}),e.setState({loading:!1})})).catch((function(e){return H(e.response)}))}},{key:"handleDisconnect",value:function(){L()}},{key:"addToAmountMoney",value:function(e){var t=this.props.money;R.dispatch({type:m,money:t+e})}},{key:"removeToAmountMoney",value:function(e){var t=this.props.money;R.dispatch({type:m,money:t-e})}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.token,n=e.actualPage,r=e.money,i=this.state.loading;return l.a.createElement("div",{className:"header"},i?l.a.createElement(Y,{size:"small"}):l.a.createElement("div",{className:"flex flex-between full-width"},l.a.createElement("h1",{className:"margin-l5 bold"},n),l.a.createElement("div",{className:"money-container"},l.a.createElement("div",{className:"label-money"},"Mes \xe9conomies"),l.a.createElement("div",{className:"money-value"},l.a.createElement("span",{className:"flex"},r),l.a.createElement("span",{className:"flex"},l.a.createElement("i",{"data-target":"add-amount-money",className:"material-icons modal-trigger"},"add"),l.a.createElement("i",{"data-target":"remove-amount-money",className:"material-icons modal-trigger"},"remove"))))),l.a.createElement("div",{id:"disconnectBtn",className:"disconnectBtn btn waves-effect",onClick:this.handleDisconnect},l.a.createElement("i",{id:"power-off",className:"power-off material-icons"},"power_settings_new")),l.a.createElement(Z,{id:"add-amount-money",userId:t,mainTitle:"Ajouter de l'argent des \xe9conomies",token:a,type:0,addToAmountMoney:this.addToAmountMoney}),l.a.createElement(Z,{id:"remove-amount-money",mainTitle:"Retirer de l'argent des \xe9conomies",userId:t,token:a,type:1,removeToAmountMoney:this.removeToAmountMoney}))}}]),a}(i.Component),_=Object(s.b)((function(e){return{money:e.amount.money}}))(Q),$=a(45),ee=a.n($),te=a(46),ae=a.n(te),ne={powerOffDarkBlue3:ee.a,logo:ae.a},re=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={},n.handleClickLink=n.handleClickLink.bind(Object(y.a)(n)),n}return Object(b.a)(a,[{key:"handleClickLink",value:function(e){(0,this.props.setDataToParent)("actualPage",e)}},{key:"render",value:function(){var e=this,t=this.props.location;return l.a.createElement("div",{className:"sidebar"},l.a.createElement("div",{className:"logo"},l.a.createElement("img",{className:"mainLogo",src:ne.logo,alt:"logo de family saves"}),l.a.createElement("span",{className:"margin-l5 bold-ligth"},"Family saves")),k.map((function(a){return l.a.createElement("div",{key:a.name},l.a.createElement(h.b,{className:"link-sidebar ".concat(t.pathname===a.path?"active":""),to:a.path,onClick:function(){return e.handleClickLink(a.name)}},a.name))})))}}]),a}(i.Component),ie=Object(p.g)(re),le=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={},n.getDataFromChild=n.getDataFromChild.bind(Object(y.a)(n)),n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){for(var e=this.props.location.pathname,t=0;t<k.length;t++){var a=k[t];if(e===a.path){this.setState({actualPage:a.name});break}}}},{key:"getDataFromChild",value:function(e,t){this.setState(Object(E.a)({},e,t))}},{key:"render",value:function(){var e=this.props,t=e.authenticated,a=e.children,n=e.id,r=e.token,i=this.state.actualPage;return l.a.createElement(l.a.Fragment,null,!0===t?l.a.createElement("div",{className:"allContainer"},l.a.createElement(ie,{setDataToParent:this.getDataFromChild}),l.a.createElement("div",{className:"containerRight"},l.a.createElement(_,{id:n,token:r,actualPage:i}),l.a.createElement("div",{className:"main-container"},a))):l.a.createElement("div",null,a))}}]),a}(i.Component),ce=Object(p.g)(le),oe=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(){return Object(v.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.authenticated,a=e.children,n=e.id,r=e.token;return l.a.createElement(ce,{token:r,authenticated:t,id:n},a)}}]),a}(i.Component),se=Object(s.b)((function(e){return{authenticated:e.auth.authenticated,id:e.auth.id,token:e.auth.token}}))(oe),de=a(10),ue=a.n(de),me={months:["Janvier","F\xe9vrier","Mars","Avril","Mai","Juin","Juillet","Aout","Septembre","Octobre","Novembre","Decembre"],monthsShort:["Jan","Fev","Mar","Avr","Mai","Jun","Jui","Aou","Sep","Oct","Nov","Dec"],weekdays:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],weekdaysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],weekdaysAbbrev:["D","L","M","M","J","V","S"],cancel:"Annuler"},he=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).init=n.init.bind(Object(y.a)(n)),n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(e){var t=this.props.defaultValue;e.defaultValue!==t&&this.init()}},{key:"init",value:function(){var e=this.props,t=e.id,a=e.setDateSelected,n=e.defaultValue;U.a.Datepicker.init(document.getElementById(t),{autoClose:!0,format:"dd/mm/yyyy",selectMonth:!0,defaultDate:new Date(ue()(n).format()),setDefaultDate:!0,minDate:new Date(ue()().day(1).format()),firstDay:1,i18n:me,onSelect:function(e){return a(ue()(e).format())}})}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.name,n=e.className,r=e.defaultValue;return l.a.createElement("div",{className:n},l.a.createElement("input",{name:a,type:"text",id:t,defaultValue:""!==r?ue()(r).format("DD/MM/YYYY"):"",className:"datepicker",placeholder:"DD/MM/AAAA",required:!0}),l.a.createElement("label",{htmlFor:a},"Date limite"))}}]),a}(i.Component),pe=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={disabledBtn:!0,title:"",startMoney:0,ceil:"",dateSelected:""},n.handleChange=n.handleChange.bind(Object(y.a)(n)),n.inputRequiredVerification=n.inputRequiredVerification.bind(Object(y.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n.setDateSelected=n.setDateSelected.bind(Object(y.a)(n)),n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.budgetCard,a=e.id,n=G.Modal.init(document.getElementById(a));if(void 0!==t){var r=t.title,i=t.currentMoney,l=t.ceil,c=t.limitDate;this.setState({disabledBtn:!1,title:r,startMoney:i,ceil:l,dateSelected:c},(function(){return U.a.updateTextFields()}))}else U.a.updateTextFields();this.setState({instanceModal:n})}},{key:"inputRequiredVerification",value:function(){var e=this.state,t=e.title,a=e.ceil,n=e.startMoney,r=e.dateSelected,i=""===t||a<=0||!Number.isInteger(a)||!Number.isInteger(n)||n<0||""===r;return this.setState({disabledBtn:i}),i}},{key:"handleChange",value:function(e){var t=this,a=e.target.name,n=e.target.value;Number.isInteger(parseFloat(n))&&(n=parseInt(n)),this.setState(Object(E.a)({},a,n),(function(){return t.inputRequiredVerification()}))}},{key:"setDateSelected",value:function(e){var t=this;this.setState({dateSelected:e},(function(){return t.inputRequiredVerification()}))}},{key:"handleSubmit",value:function(){var e=this,t=this.props,a=t.token,n=t.userId,r=t.budgetCard,i=t.getCardList,l=t.getFavoriteRelation,c=t.edit,o=this.state,s=o.title,d=o.ceil,u=o.startMoney,m=o.dateSelected,h=o.instanceModal,p={title:s,ceil:d,currentMoney:u,limitDate:m,userId:n};if(void 0!==r&&void 0!==c)return C.a.patch("".concat(O,"/api/budget-card/").concat(r.id),p,j(a)).then((function(t){200===t.status&&(i(),l(),e.setState({disabledBtn:!1,title:t.data.title,startMoney:t.data.currentMoney,ceil:t.data.ceil,dateSelected:t.data.limitDate},(function(){return U.a.updateTextFields()})),h.close(),z("L'\xe9dition de l'enveloppe est r\xe9ussi",null))})).catch((function(e){return H(e.response)}));C.a.post("".concat(O,"/api/budget-card/create"),p,j(a)).then((function(e){201===e.status&&(X(),i(),U.a.updateTextFields(),h.close(),z("Cr\xe9ation de l'enveloppe est r\xe9ussi",null))})).catch((function(e){return H(e.response)}))}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.mainTitle,n=this.state,r=n.disabledBtn,i=n.title,c=n.ceil,o=n.startMoney,s=n.dateSelected;return l.a.createElement("div",{id:t,className:"modal card"},l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"row bold text-dark-blue3 title-size"},a),l.a.createElement("form",null,l.a.createElement("div",{className:"input-field col m12  l12"},l.a.createElement("input",{name:"title",type:"text",onChange:this.handleChange,defaultValue:i,required:!0}),l.a.createElement("label",{htmlFor:"title"},"Titre")),l.a.createElement("div",{className:"input-field col m12  l12"},l.a.createElement("input",{name:"ceil",type:"number",onChange:this.handleChange,defaultValue:c,min:1,required:!0}),l.a.createElement("label",{htmlFor:"ceil"},"Plafond (ex: 50)")),l.a.createElement("div",{className:"input-field col m12  l12"},l.a.createElement("input",{name:"startMoney",type:"number",onChange:this.handleChange,value:o,min:0,required:!0}),l.a.createElement("label",{htmlFor:"startMoney"},"Argent de d\xe9part (minimum : 0)")),l.a.createElement(he,{id:"picker".concat(t),name:"limitDate",className:"input-field col m12  l12",defaultValue:s,setDateSelected:this.setDateSelected}),l.a.createElement(W,{type:"button",text:"Valider",disabled:r,onClick:this.handleSubmit}))))}}]),a}(i.Component),ve=a(32),be=a.n(ve),fe=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={},n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.budgetCard,a=e.cardId,n=t.ceil,r=t.currentMoney,i=document.getElementById("budgetCard".concat(a)),l=["Progression","Reste"],c=[r,n-r],o=["#00ff4c","#225d9b"];this.setState({labels:l,data:c,backgroundColor:o}),document.getElementById("percentage".concat(a)).style.textAlign="center",new be.a(i,{type:"doughnut",data:{labels:["".concat(l[0]," : ").concat(c[0]),"".concat(l[1]," : ").concat(c[1])],datasets:[{data:[r,n-r],backgroundColor:o,borderWidth:0,hoverBorderColor:"black",hoverBorderWidth:1}]},options:{cutoutPercentage:75,tooltips:{callbacks:{label:this.customLabelChart}},legend:{position:"top",align:"center",onClick:null,labels:{usePointStyle:!0,boxWidth:10},display:!1}}})}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.budgetCard,n=t.cardId,r=a.ceil,i=a.currentMoney;if(e.budgetCard!==a){var l=document.getElementById("budgetCard".concat(n)),c=["Progression","Reste"],o=[i,r-i],s=["#00ff4c","#225d9b"];this.setState({labels:c,data:o,backgroundColor:s}),document.getElementById("percentage".concat(n)).style.textAlign="center",new be.a(l,{type:"doughnut",data:{labels:["".concat(c[0]," : ").concat(o[0]),"".concat(c[1]," : ").concat(o[1])],datasets:[{data:[i,r-i],backgroundColor:s,borderWidth:0,hoverBorderColor:"black",hoverBorderWidth:1}]},options:{responsive:!0,cutoutPercentage:75,tooltips:{callbacks:{label:this.customLabelChart}},legend:{position:"top",align:"center",onClick:null,labels:{usePointStyle:!0,boxWidth:10},display:!1}}})}}},{key:"customLabelChart",value:function(e,t){var a=e.index,n=t.labels[a].split(" : ");return n[0]+" : "+n[1]}},{key:"render",value:function(){var e=this.props,t=e.budgetCard,a=e.cardId,n=t.currentMoney,r=t.ceil,i=this.state,c=i.data,o=i.labels,s=i.backgroundColor,d=Math.round(n/r*100);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"chart-container"},l.a.createElement("div",{id:"percentage".concat(a),className:"percentage title-size"},d,"%"),l.a.createElement("div",{className:"graphic-container"},l.a.createElement("canvas",{id:"budgetCard".concat(a)}))),l.a.createElement("div",{className:" flex flex-column"},void 0!==o&&o.map((function(e,t){return l.a.createElement("div",{key:e,className:" flex"},l.a.createElement("i",{className:"material-icons",style:{color:s[t]}},"brightness_1"),e," : ",c[t])}))))}}]),a}(i.Component),ge=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={loading:!0},n.handleDelete=n.handleDelete.bind(Object(y.a)(n)),n.handleFavorite=n.handleFavorite.bind(Object(y.a)(n)),n.addFavoriteButton=n.addFavoriteButton.bind(Object(y.a)(n)),n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.addFavoriteButton()}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.budgetCardsInFavoriteId,n=t.id,r=this.state.loading;if(e.budgetCardsInFavoriteId!==a&&this.addFavoriteButton(),!1===r){var i=document.getElementById("dateToolTip".concat(n));G.Tooltip.init(i)}}},{key:"addFavoriteButton",value:function(){var e=this.props,t=e.budgetCardsInFavoriteId,a=e.favoriteRelationList,n=e.interaction,r=e.budgetId,i=e.id,l=document.getElementById("dateToolTip".concat(i));if(G.Tooltip.init(l),!0===n&&t.includes(r)){var c=a[t.indexOf(r)];this.setState({isFavorite:c.isFavorite,favoriteRelationId:c.id,loading:!1})}!1===n&&this.setState({loading:!1})}},{key:"CalculeTimeOut",value:function(e){return ue()().to(e)}},{key:"traslateDate",value:function(e){var t=e.split(" "),a="";return t.forEach((function(e,n){"in"===e?t[n]="dans":"a"===e?t[n]="1":"days"===e?t[n]="jours":"day"===e?t[n]="jour":"days"===e?t[n]="jours":"years"===e?t[n]="ann\xe9es":"year"===e?t[n]="ann\xe9e":"months"===e||"month"===e?t[n]="mois":"hours"===e?t[n]="heures":"hour"===e&&(t[n]="heure"),a+=t[n]+" "})),a}},{key:"handleDelete",value:function(){var e=this.props,t=e.token,a=e.getCardList,n=e.getFavoriteRelation,r=e.budgetId;C.a.delete("".concat(O,"/api/budget-card/").concat(r),j(t)).then((function(){a(),n(),z("La suppression est r\xe9ussi",null)})).catch((function(e){return H(e.response)}))}},{key:"handleFavorite",value:function(){var e=this.state,t=e.isFavorite,a=e.favoriteRelationId,n=this.props.token;this.setState({isFavorite:!t},(function(){var e={isFavorite:!t};C.a.patch("".concat(O,"/api/favorite-budget-card/").concat(a),e,j(n)).then().catch((function(e){return H(e.response)}))}))}},{key:"render",value:function(){var e=this.props,t=e.budgetCard,a=e.amountId,n=e.token,r=e.getCardList,i=e.userId,c=e.interaction,o=e.id;if(!0===this.state.loading)return l.a.createElement(Y,null);var s=t.title,d=t.limitDate,u=this.state.isFavorite,m=this.traslateDate(this.CalculeTimeOut(d));return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col m4 l3"},l.a.createElement("div",{className:"budget-card card"},l.a.createElement("div",{className:"full-width row text-center"},l.a.createElement("div",{className:"col m12 l12"},l.a.createElement("div",null,l.a.createElement("span",{className:"bold title-size text-dark-blue2"},s),c&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"favorite-btn bold title-size text-dark-blue2",onClick:this.handleFavorite},void 0!==u?l.a.createElement("i",{className:"material-icons rounded"},!0===u?"star":"star_border"):l.a.createElement(Y,{size:"small"})),l.a.createElement("div",{className:"trash-can bold title-size text-dark-blue2",onClick:this.handleDelete},l.a.createElement("i",{className:"material-icons rounded"},"delete")),l.a.createElement("div",{className:"edit-btn bold title-size text-dark-blue2"},l.a.createElement("i",{"data-target":"edit".concat(o),className:"material-icons rounded modal-trigger"},"edit")),l.a.createElement("div",{className:"add-money bold title-size text-dark-blue2"},l.a.createElement("i",{"data-target":"add-money".concat(o),className:"material-icons rounded modal-trigger"},"add")),l.a.createElement("div",{className:"remove-money bold title-size text-dark-blue2"},l.a.createElement("i",{"data-target":"remove-money".concat(o),className:"material-icons modal-trigger"},"remove")))),l.a.createElement("div",{className:"flex flex-center"},l.a.createElement("span",{className:"sub-title"},"se termine ",m),l.a.createElement("i",{id:"dateToolTip".concat(o),className:"material-icons dateToolTip tooltipped text-dark-blue3 margin-l5","data-position":"bottom","data-tooltip":ue()(t.limitDate).format("DD/MM/YYYY")},"info")))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col m12 l12"},l.a.createElement(fe,{cardId:o,budgetCard:t}))))),l.a.createElement(pe,{id:"edit".concat(o),edit:!0,getCardList:r,budgetCard:t,userId:i,mainTitle:"Modifier l'enveloppe",token:n}),l.a.createElement(Z,{token:n,type:0,getCardList:r,mainTitle:"Ajouter de l'argent dans l'enveloppe ".concat(t.title),userId:i,id:"add-money".concat(o),budgetCard:t,amountId:a}),l.a.createElement(Z,{token:n,type:1,getCardList:r,mainTitle:"Soustraire de l'argent dans l'enveloppe ".concat(t.title),userId:i,id:"remove-money".concat(o),budgetCard:t,amountId:a}))}}]),a}(i.Component),Ee=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={},n}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.content;return l.a.createElement("div",{className:"col m3 l3 flex align-stretch"},l.a.createElement("div",{className:"card white darken-1 full-width"},l.a.createElement("span",{className:"card-title bold title-size text-dark-blue text-center col m12 l12"},t),l.a.createElement("div",{className:"card-content flex flex-center flex-column text-dark-blue2 title-size"},a)))}}]),a}(i.Component),ye=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={loading:!0,favoriteLoading:!0},n.getCardList=n.getCardList.bind(Object(y.a)(n)),n.getFavoriteRelation=n.getFavoriteRelation.bind(Object(y.a)(n)),n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.getCardList(),this.getFavoriteRelation()}},{key:"getCardList",value:function(){var e=this,t=this.props,a=t.userId,n=t.token;C.a.get("".concat(O,"/api/budget-card-by-userId/").concat(a),j(n)).then((function(t){var a=t.data[0].budgetCards,n=0,r=0,i=[];a.sort((function(e,t){return ue()(e.limitDate).isBefore(ue()(t.limitDate))?-1:ue()(e.limitDate).isAfter(ue()(t.limitDate))?1:0})),a.forEach((function(e){n+=e.currentMoney,r+=e.ceil,i.push(e)}));var l=[];a.sort((function(e,t){return Math.round(e.currentMoney/e.ceil*100)>Math.round(t.currentMoney/t.ceil*100)?-1:Math.round(e.currentMoney/e.ceil*100)<Math.round(t.currentMoney/t.ceil*100)?1:0})),a.forEach((function(e){l.push(e)}));var c=Math.round(n/r*100);Number.isNaN(c)&&(c=0),e.setState({budgetCardsNumber:t.data[0].budgetCards.length,budgetCardSortedByLimitDate:i,budgetCardSortedByProgression:l,progressionTotal:c,currentMoneyTotal:n,ceilTotal:r,loading:!1},(function(){return U.a.Modal.init(document.getElementById("create-card"))}))})).catch((function(e){return H(e.response)}))}},{key:"getFavoriteRelation",value:function(){var e=this,t=this.props,a=t.userId,n=t.token;C.a.get("".concat(O,"/api/favorite-budget-card/by-userId/").concat(a),j(n)).then((function(t){var a=[];t.data.favoriteBudgetCards.forEach((function(e){e.isFavorite&&a.push(e)})),e.setState({favoriteList:a,favoriteBudgetCards:t.data.favoriteBudgetCards,favoriteLoading:!1})})).catch((function(e){return H(e.response)}))}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.budgetCardsNumber,n=e.budgetCardSortedByLimitDate,r=e.budgetCardSortedByProgression,i=e.progressionTotal,c=e.currentMoneyTotal,o=e.ceilTotal,s=e.favoriteLoading,d=e.favoriteList;return!0===t||!0===s?l.a.createElement(Y,{size:"big"}):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"row flex align-stretch"},l.a.createElement(Ee,{title:"Nombre d'enveloppes",content:a}),l.a.createElement(Ee,{title:"Argent total distribu\xe9",content:"".concat(c,"\u20ac")}),l.a.createElement(Ee,{title:"Reste total",content:"".concat(o,"\u20ac")}),l.a.createElement(Ee,{title:"Progression total",content:"".concat(i,"%")})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col m12 l12 title-size text-dark-blue3 bold-litgh"},"Mes enveloppes favorites")),l.a.createElement("div",{className:"row"},d.length>0?d.map((function(e){return l.a.createElement(ge,{key:e.budgetCard.id,budgetId:e.budgetCard.id,id:"favorite".concat(e.budgetCard.id),budgetCard:e.budgetCard,interaction:!1})})):l.a.createElement("div",{className:"col m12 l12 text-dark-blue"},"Mettez des enveloppes dans les favoris pour les afficher ici."))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col m12 l12 title-size text-dark-blue3 bold-litgh"},"Les enveloppes tri\xe9s par date d'expiration")),l.a.createElement("div",{className:"row"},n.length>0?n.map((function(e,t){return t<4&&l.a.createElement(ge,{key:e.id,budgetId:e.id,id:"perDate".concat(e.id),budgetCard:e,interaction:!1})})):l.a.createElement("div",{className:"col m12 l12 text-dark-blue"},"Cr\xe9ez des enveloppes pour les afficher ici."))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col m12 l12 title-size text-dark-blue3 bold-litgh"},"Les enveloppes tri\xe9s par progression")),l.a.createElement("div",{className:"row"},r.length>0?r.map((function(e,t){return t<4&&l.a.createElement(ge,{key:e.id,budgetId:e.id,id:"perProgression".concat(e.id),budgetCard:e,interaction:!1})})):l.a.createElement("div",{className:"col m12 l12 text-dark-blue"},"Cr\xe9ez des enveloppes pour les afficher ici."))))}}]),a}(i.Component),ke=Object(s.b)((function(e){return{username:e.auth.username,userId:e.auth.id,token:e.auth.token,amountId:e.auth.amountId}}))(ye),Ne=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={},n}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props,t=e.deal;if(e.header)return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col m12 l12"},l.a.createElement("div",{className:"deal-card header-table card row"},l.a.createElement("span",{className:"bold col m3 l3 text-center"},"Nom de l'enveloppe"),l.a.createElement("span",{className:"bold col m3 l3 text-center"},"Transaction"),l.a.createElement("span",{className:"bold col m3 l3 text-center"},"Mes \xe9conomies"),l.a.createElement("span",{className:"bold col m3 l3 text-center"},"Date"))));var a=t.money,n=t.type,r=t.budgetCard,i=t.createdAt,c=r.title;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col m12  l12"},l.a.createElement("div",{className:"flex deal-card card row"},l.a.createElement("span",{className:"bold col m3 l3 text-dark-blue3 text-center"},c),0===n?l.a.createElement("span",{className:"flex col m3 l3 text-dark-blue flex-center flex-column text-center"},l.a.createElement("div",null,l.a.createElement("i",{className:"material-icons"},"arrow_back")),l.a.createElement("div",{className:"bold text-dark-blue"},a,"\u20ac")):l.a.createElement("span",{className:"flex col m3 l3 text-dark-blue flex-center flex-column text-center"},l.a.createElement("div",null,l.a.createElement("i",{className:"material-icons"},"arrow_forward")),l.a.createElement("div",{className:"bold text-dark-blue"},a,"\u20ac")),l.a.createElement("span",{className:"bold col m3 l3 text-dark-blue3 text-center"},"Mes \xe9conomies"),l.a.createElement("span",{className:"bold col m3 l3 text-dark-blue3 text-center"},ue()(i).format("DD/MM/YYYY HH:mm")))))}}]),a}(i.Component),Ce=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={loading:!0},n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.userId,n=t.token;C.a.get("".concat(O,"/api/deal/by-userId/").concat(a),j(n)).then((function(t){var a=t.data;a.sort((function(e,t){return ue()(e.createdAt).isBefore(ue()(t.createdAt))?1:ue()(e.createdAt).isAfter(ue()(t.createdAt))?-1:0})),e.setState({deals:a,loading:!1})})).catch((function(e){return H(e.response)}))}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.deals;return t?l.a.createElement(Y,{size:"big"}):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement(Ne,{header:!0}),a.length>0?a.map((function(e){return l.a.createElement(Ne,{key:e.id,deal:e})})):l.a.createElement("div",{className:"col m12 l12 text-dark-blue"},"Aucun historique pour le moment")))}}]),a}(i.Component),Oe=Object(s.b)((function(e){return{userId:e.auth.id,token:e.auth.token}}))(Ce),je=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={},n}return Object(b.a)(a,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"col m4 l3"},l.a.createElement("div",{"data-target":"create-card",className:"placeholder-card card waves-effect waves-blue modal-trigger"},l.a.createElement("i",{className:"material-icons"},"add"),l.a.createElement("span",{className:"bold text-dark-blue2"},"Cr\xe9er une enveloppe"))))}}]),a}(i.Component),Ae=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={loading:!0},n.getCardList=n.getCardList.bind(Object(y.a)(n)),n.getFavoriteRelation=n.getFavoriteRelation.bind(Object(y.a)(n)),n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){this.getCardList()}},{key:"getFavoriteRelation",value:function(){var e=this,t=this.props,a=t.userId,n=t.token;C.a.get("".concat(O,"/api/favorite-budget-card/by-userId/").concat(a),j(n)).then((function(t){var a=[],n=[];t.data.favoriteBudgetCards.forEach((function(e){a.push(e.budgetCard.id),n.push(e)})),e.setState({budgetCardsInFavoriteId:a,favoriteRelationList:n,favoriteBudgetCards:t.data.favoriteBudgetCards})})).catch((function(e){return H(e.response)}))}},{key:"getCardList",value:function(){var e=this,t=this.props,a=t.userId,n=t.token;C.a.get("".concat(O,"/api/budget-card-by-userId/").concat(a),j(n)).then((function(t){e.getFavoriteRelation(),e.setState({budgetCards:t.data[0].budgetCards,loading:!1},(function(){return G.Modal.init(document.getElementById("create-card"))}))})).catch((function(e){return H(e.response)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.token,n=t.userId,r=t.amountId,i=this.state,c=i.loading,o=i.budgetCards,s=i.budgetCardsInFavoriteId,d=i.favoriteBudgetCards,u=i.favoriteRelationList;return c?l.a.createElement(Y,{size:"big"}):l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"row"},l.a.createElement(je,null)),l.a.createElement("div",{className:"row"},void 0!==s?l.a.createElement(l.a.Fragment,null,o.map((function(t){return l.a.createElement(ge,{key:t.id,budgetId:t.id,id:"cardBoard".concat(t.id),token:a,getCardList:e.getCardList,favoriteBudgetCards:d,getFavoriteRelation:e.getFavoriteRelation,favoriteRelationList:u,budgetCardsInFavoriteId:s,userId:n,amountId:r,budgetCard:t,interaction:!0})}))):l.a.createElement(Y,null),l.a.createElement(pe,{id:"create-card",token:a,userId:n,getCardList:this.getCardList,getFavoriteRelation:this.getFavoriteRelation,mainTitle:"Cr\xe9er une enveloppe"})))}}]),a}(i.Component),Me=Object(s.b)((function(e){return{userId:e.auth.id,token:e.auth.token,amountId:e.auth.amountId}}))(Ae),we=function(){return l.a.createElement("div",{className:"title-size text-dark-blue2 bold"},"Erreur 404 : Page non trouv\xe9e")},xe=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",disabledBtn:!0},n.inputRequiredVerification=n.inputRequiredVerification.bind(Object(y.a)(n)),n.handleChange=n.handleChange.bind(Object(y.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(y.a)(n)),n.handlePress=n.handlePress.bind(Object(y.a)(n)),n}return Object(b.a)(a,[{key:"inputRequiredVerification",value:function(){var e=this.state,t=e.email,a=e.password,n=""===t||""===a;return this.setState({disabledBtn:n}),n}},{key:"handlePress",value:function(e){var t=e.charCode,a=this.inputRequiredVerification();13!==t||a||this.handleSubmit()}},{key:"handleChange",value:function(e){var t=this,a=e.target,n=a.name,r=a.value;this.setState(Object(E.a)({},n,r),(function(){return t.inputRequiredVerification()}))}},{key:"handleSubmit",value:function(){var e=this.state,t={email:e.email,password:e.password};C.a.post("".concat(O,"/api/login_check"),t,j()).then((function(e){var t=e.data.token,a=r()(t);t="Bearer ".concat(t),localStorage.setItem("token",t),R.dispatch({type:d,token:t,id:a.id,username:a.username,email:a.email,role:a.roles,amountId:a.amountId})})).catch((function(e){return H(e.response)}))}},{key:"render",value:function(){var e=this.state.disabledBtn;return l.a.createElement("div",{className:"row bg-dark-blue"},l.a.createElement("form",{className:"col m6 l6 right valign-wrapper"},l.a.createElement("div",{className:"input-field col m5 l5"},l.a.createElement("input",{name:"email",type:"email",onChange:this.handleChange,onKeyPress:this.handlePress}),l.a.createElement("label",{htmlFor:"email"},"Email")),l.a.createElement("div",{className:"input-field col m5 l5"},l.a.createElement("input",{name:"password",type:"password",onChange:this.handleChange,onKeyPress:this.handlePress}),l.a.createElement("label",{htmlFor:"password"},"Mot de passe")),l.a.createElement("div",{className:"col 2"},l.a.createElement(W,{type:"button",text:"Connexion",disabled:e,onClick:this.handleSubmit}))))}}]),a}(i.Component),Ie=function(e){Object(f.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={name:"",email:"",password:"",password2:"",disabledBtn:!0},n.handleChange=n.handleChange.bind(Object(y.a)(n)),n.handleClick=n.handleClick.bind(Object(y.a)(n)),n.inputRequiredVerification=n.inputRequiredVerification.bind(Object(y.a)(n)),n}return Object(b.a)(a,[{key:"componentDidMount",value:function(){U.a.AutoInit()}},{key:"inputRequiredVerification",value:function(){var e=this.state,t=e.name,a=e.email,n=e.password,r=e.password2;this.setState({disabledBtn:""===t||""===a||""===n||""===r||n!==r})}},{key:"handleChange",value:function(e){var t=this,a=e.target,n=a.name,r=a.value;this.setState(Object(E.a)({},n,r),(function(){return t.inputRequiredVerification()}))}},{key:"handleClick",value:function(){var e=this.state,t={username:e.name,email:e.email,password:e.password,roles:["ROLE_USER"]};C.a.post("".concat(O,"/api/user/create"),t,j()).then((function(){z("Inscription r\xe9ussi","refresh")})).catch((function(e){return H(e.response)}))}},{key:"render",value:function(){var e=this.state.disabledBtn;return l.a.createElement("div",{className:"container row"},l.a.createElement("form",{className:"col m12 l12"},l.a.createElement("span",{className:"title-size col m12  l12 bold-ligth text-dark-blue3"},"Inscription"),l.a.createElement("div",{className:"input-field col m12 l12"},l.a.createElement("input",{name:"name",type:"text",onChange:this.handleChange}),l.a.createElement("label",{htmlFor:"name"},"Nom de compte")),l.a.createElement("div",{className:"input-field col m12 l12"},l.a.createElement("input",{name:"email",type:"email",onChange:this.handleChange}),l.a.createElement("label",{htmlFor:"email"},"Email")),l.a.createElement("div",{className:"input-field col m12 l12"},l.a.createElement("input",{name:"password",type:"password",onChange:this.handleChange}),l.a.createElement("label",{htmlFor:"password"},"Mot de passe")),l.a.createElement("div",{className:"input-field col m12 l12"},l.a.createElement("input",{name:"password2",type:"password",onChange:this.handleChange}),l.a.createElement("label",{htmlFor:"password2"},"Confirmer le mot de passe")),l.a.createElement("div",{className:"center-align"},l.a.createElement(W,{type:"button",text:"S'inscrire",disabled:e,onClick:this.handleClick}))))}}]),a}(i.Component),Be=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(xe,null),l.a.createElement(Ie,null))},De=a(47),Se=Object(s.b)((function(e,t){return{authenticated:e.auth.authenticated,currentURL:t.location.pathname}}))((function(e){var t=e.component,a=Object(De.a)(e,["component"]),n=a.authenticated;return l.a.createElement(p.b,Object.assign({},a,{render:function(e){return n?l.a.createElement(p.a,{to:{pathname:"/",state:{from:e.location}}}):l.a.createElement(t,e)}}))})),Te=function(e,t){var a=function(a){Object(f.a)(c,a);var i=Object(g.a)(c);function c(e){var t;return Object(v.a)(this,c),(t=i.call(this,e)).state={isAuth:!1,authorized:!1},t}return Object(b.a)(c,[{key:"componentDidMount",value:function(){var e=this.props,a=e.authenticated,n=e.history;if(!a)return n.push("/login");this.AccessRole(t)}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.authenticated,a=e.history;if(!t)return a.push("/login")}},{key:"AccessRole",value:function(){var e=this.props.role[0];return t?t.includes(e)?this.setState({isAuth:!0,authorized:!0}):this.setState({isAuth:!1,authorized:!1}):this.setState({isAuth:!0,authorized:!0})}},{key:"render",value:function(){var t=this.state,a=t.isAuth,i=t.authorized;return a&&i?l.a.createElement(e,this.props):a&&!i?l.a.createElement(n,null):l.a.createElement(r,{size:"big"})}}]),c}(i.Component),n=function(){return l.a.createElement("div",{className:"unauthorized"},"unauthorized")},r=function(){return l.a.createElement("div",{className:"centerPage"},l.a.createElement("div",{className:"preloader-wrapper big active"},l.a.createElement("div",{className:"spinner-layer spinner-blue-only"},l.a.createElement("div",{className:"circle-clipper left"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"gap-patch"},l.a.createElement("div",{className:"circle"})),l.a.createElement("div",{className:"circle-clipper right"},l.a.createElement("div",{className:"circle"})))))};return Object(s.b)((function(e){return{authenticated:e.auth.authenticated,token:e.auth.token,role:e.auth.role}}))(a)},Fe="ROLE_USER",Re=function(){var e=Fe;return l.a.createElement(h.a,null,l.a.createElement(se,null,l.a.createElement(p.d,null,l.a.createElement(Se,{exact:!0,path:"/login",component:Be}),l.a.createElement(p.b,{exact:!0,path:"/",component:Te(ke,e)}),l.a.createElement(p.b,{exact:!0,path:"/managing/budgetCard",component:Te(Me,e)}),l.a.createElement(p.b,{exact:!0,path:"/deal/history",component:Te(Oe,e)}),l.a.createElement(p.b,{component:Te(we,e)}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Le=localStorage.getItem("token");if(Le){var Ve=r()(Le);R.dispatch({type:d,token:Le,id:Ve.id,role:Ve.roles,username:Ve.username,email:Ve.email,amountId:Ve.amountId})}o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(s.a,{store:R},l.a.createElement(Re,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.97e709a4.chunk.js.map